---
layout: default
title: View
permalink: /view-course/
---
<h1 id="courseName">Course Name</h1>
<div class="row">
<div class="col-sm-12">
  
<!--<a class="btn btn-default" href="/build/">Edit</a>
-->
<!--share option goes away if it isnt your course -->
<!--
<a class="btn btn-default" href="/build/">Delete</a>
Delete option should be on course list
It would be remove for shared courses
-->
<!-- if its your course, you can set the rc, but otherwise, just marks -->
</div>
</div>

<div class="row">
  <div class="col-sm-12 col-md-6" id="courseView">
    <a class="btn btn-default" href="#">Save</a>
    <a class="btn btn-default" href="/build/">Share</a>
    <p id="output">There is an error! Contact russ@regattahub.com if this continues.</p>
  </div>
  <div class="col-sm-12 col-md-6" id="runForm">
    <form action="/run/" method="GET">
      <p>Position the Race Committee to run the course.</p>
      <div class="form-group">
	<button type="button" class="btn btn-default" onclick="inputPosition()">Use my current position</button>
      </div>
    <div class="form-group">
	<label for"boatLatitude">Latitude:</label>
	<input type="number" min="-90" max="90" step="0.0000000000001" name="boatLatitude" id="boatLatitude">
    </div>
    <div class="form-group">
	<label for"boatLongitude">Longitude:</label>
	<input type="number" min="-180" max="180" step="0.0000000001" name="boatLongitude" id="boatLongitude">
      </div>
      <!-- Include a bunch of hidden inputs for the marks
	   that probably isnt the best way to do that
	-->
      <input type="hidden" name="marks" id="marksList" value="hello">
      <input type="submit" class="btn btn-success" value="Run" >
    </form>
  </div>
</div>
    
    <script>

      
function inputPosition() {
    navigator.geolocation.getCurrentPosition(
	function(position) {
	    // run for success
	    document.getElementById("boatLatitude").value=position.coords.latitude;
	    document.getElementById("boatLongitude").value=position.coords.longitude;
	},
	function(position) {
	    // run for error
	    console.log('error getting position');
	},
	{
	    // helper
	    timeout: 50000,
	    maximumAge: Infinity,
	    enableHighAccuracy: true

	}
    );

}


// put all background functions in my main js file
// show basically what is happening here

var viewSource = getQueryVariable('inputSource');
if (viewSource == 'builder') {
    var output = '<p>Your course is ready!</p><h4>Marks</h4>';
    var marksList = "";
    // run the functions to build the course
    marks = build_course(location.search.substring(1));
    // convert mark list to string
    for (i=0; i<marks.length; i++) {
	output += i+". "+marks[i].name+": "+marks[i].x+", "+marks[i].y+"<br>";
	marksList +=marks[i].name+","+marks[i].x+","+marks[i].y+";";
    }

    // put marklist into value for form
    document.getElementById('output').innerHTML = output;
    document.getElementById('marksList').value = marksList;

} else if (viewSource == 'courseList') {
    // build the course, but this time it is easier
    // actually probably the same with a few steps skipped
} else {
    // indicate there is no course to build
    document.getElementById('output').innerHTML = "there is no course to build. Try going to Courses or Build.";
}


</script>

